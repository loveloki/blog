# 不要使用 `rm -rf *`

## 事故

因为 build 完后每次手动更新很麻烦，于是写了个脚本，使用的是 `node-ssh` 库，有问题的代码是 ` ssh.execCommand('rm -rf *', { cwd: '/home/username/opt/sea' })` ，一开始没有任何问题。直到换了新的测试服务器。

使用用户账号在新的服务器上发现在 `~` 目录执行了删除命令，进行排查后发现 `cd` 的命令执行失败，但是 `rm -rf *` 的命令继续执行，导致在 `~` 目录下删除了所有的文件。

## 后果

万幸是在测试服务器，所以只是删了一些测试用的数据。好吧。。。因为删除了同事正在使用的数据，导致他又花费了几天重新做数据，只能请客吃了一顿饭。sad。

## 结论

不要使用 `rm -rf *` ，删除应该是指定文件夹，上面的改为 `ssh.execCommand('rm -rf sea', { cwd: '/home/username/opt' })` 。**永远不要使用 `*` !**
